<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” Password Strength Checker with Hash Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <h1>ğŸ” Password Strength Checker</h1>
        <p style="color: #666; font-size: 14px;">Check password strength & generate secure hashes</p>
        
        <!-- PASSWORD INPUT FORM -->
        <form method="POST">
            <input 
                type="text" 
                name="password" 
                placeholder="Enter your password here..." 
                required
                autocomplete="off"
            >
            <button type="submit">Check Strength & Generate Hashes</button>
        </form>

        <!-- ============================================ -->
        <!-- SECTION 1: STRENGTH RESULTS (if form submitted) -->
        <!-- ============================================ -->
        {% if score is not none %}
        <div class="results-section">
            <h2>ğŸ’ª Strength Analysis</h2>
            
            <!-- Strength Label -->
            <div class="label" style="color: {{ color }};">
                {{ label }}
            </div>

            <!-- Progress Bar -->
            <div class="bar-container">
                <div class="bar" style="width: {{ width }}; background-color: {{ color }};"></div>
            </div>
            
            <!-- Score Display -->
            <p style="margin-top: 10px; font-weight: bold;">
                Score: {{ score }}/5
            </p>

            <!-- Suggestions (if any) -->
            {% if suggestions %}
            <div class="suggestions">
                <h3>ğŸ’¡ Suggestions to Improve:</h3>
                <ul>
                    {% for suggestion in suggestions %}
                    <li>{{ suggestion }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% else %}
            <p class="good">âœ… Your password meets all criteria!</p>
            {% endif %}
        </div>

        <!-- ============================================ -->
        <!-- SECTION 2: HASH GENERATION (NEW Phase 1!) -->
        <!-- ============================================ -->
        <div class="hash-section">
            <h2>ğŸ” Generated Hashes</h2>
            <p style="font-size: 13px; color: #666; margin-bottom: 20px;">
                Password: <strong>"{{ password }}"</strong>
            </p>

            <!-- INSECURE HASHES (with warning) -->
            <div class="hash-category insecure">
                <h3>âš ï¸ Insecure Hashes (Educational Only)</h3>
                <p class="warning-text">
                    âŒ NEVER use these for storing real passwords! 
                    They are too fast and easy to crack.
                </p>

                <!-- MD5 Hash -->
                <div class="hash-item">
                    <label>MD5:</label>
                    <div class="hash-display">
                        <input 
                            type="text" 
                            value="{{ hashes.insecure.md5 }}" 
                            readonly 
                            id="md5-hash"
                            class="hash-input"
                        >
                        <button onclick="copyHash('md5-hash')" class="copy-btn">
                            ğŸ“‹ Copy
                        </button>
                    </div>
                </div>

                <!-- SHA-256 Hash -->
                <div class="hash-item">
                    <label>SHA-256:</label>
                    <div class="hash-display">
                        <input 
                            type="text" 
                            value="{{ hashes.insecure.sha256 }}" 
                            readonly 
                            id="sha256-hash"
                            class="hash-input"
                        >
                        <button onclick="copyHash('sha256-hash')" class="copy-btn">
                            ğŸ“‹ Copy
                        </button>
                    </div>
                </div>
            </div>

            <!-- SECURE HASH (with recommendation) -->
            <div class="hash-category secure">
                <h3>âœ… Secure Hash (Use This!)</h3>
                <p class="success-text">
                    âœ… bcrypt is the industry standard for password storage. 
                    It's slow, salted, and secure!
                </p>

                <!-- bcrypt Hash -->
                <div class="hash-item">
                    <label>bcrypt:</label>
                    <div class="hash-display">
                        <input 
                            type="text" 
                            value="{{ hashes.secure.bcrypt }}" 
                            readonly 
                            id="bcrypt-hash"
                            class="hash-input"
                        >
                        <button onclick="copyHash('bcrypt-hash')" class="copy-btn">
                            ğŸ“‹ Copy
                        </button>
                    </div>
                    <p style="font-size: 12px; color: #666; margin-top: 5px;">
                        ğŸ’¡ Notice: Same password creates different hash each time!
                    </p>
                </div>
            </div>

            <!-- Educational Info Box -->
            <div class="info-box">
                <h4>ğŸ“ What's the difference?</h4>
                <ul style="text-align: left; font-size: 13px;">
                    <li><strong>MD5/SHA-256:</strong> Fast algorithms = Easy to crack (billions of attempts/second)</li>
                    <li><strong>bcrypt:</strong> Intentionally slow = Hard to crack (takes ~0.3 seconds per attempt)</li>
                    <li><strong>Salting:</strong> bcrypt adds random data, so same password = different hash!</li>
                </ul>
            </div>
        </div>
        {% endif %}

    </div>

    <!-- ============================================ -->
    <!-- JAVASCRIPT: Copy to Clipboard Functionality -->
    <!-- ============================================ -->
    <script>
        /**
         * Copies hash value to clipboard when copy button is clicked
         * @param {string} inputId - ID of the input field to copy from
         */
        function copyHash(inputId) {
            // Get the input element by its ID
            const input = document.getElementById(inputId);
            
            // Select the text inside the input
            input.select();
            input.setSelectionRange(0, 99999); // For mobile devices
            
            // Copy to clipboard using modern API
            navigator.clipboard.writeText(input.value).then(function() {
                // Success! Show feedback to user
                alert('âœ… Hash copied to clipboard!');
            }, function(err) {
                // Fallback for older browsers
                document.execCommand('copy');
                alert('âœ… Hash copied!');
            });
        }
    </script>
</body>
</html>
